# ワーク: AWS Lambda 関数を作成してテスト実行してみよう

## 手順

1. ラボ用 URL にアクセスして、サインインして下さい。

1. **ラボ 4 (Python)** の **起動** のボタンをクリックして下さい。

1. ページ上部にある **ラボを開始する** (オレンジのボタン）をクリックして下さい。
   
1. ページ上部にある **コンソールを開く** (オレンジのボタン）をクリックして、AWS マネジメントコンソールにサインインしてください。

1. AWS マネジメントコンソールで、ページ上部の検索窓で `lambda` と入力し、表示されるメニューから **AWS Lambda** の部分をクリックして下さい。  

1. AWS Lambda のページで、左側のメニューから **関数** をクリックして下さい。

1. Lambda 関数の作成
   - [**関数の作成**] をクリック
   - 関数名: `work-function`
   - ランタイム: **Python 3.9**
   - デフォルトの実行ロールの変更
      - **既存のロールを使用する**
      - **lambdaPollyRole**
      - [**関数の作成**] をクリック
1. Lambda 関数のコードの作成
   - コード: このフォルダにある lambda_function.py の内容に置換える
      - コード変更後は [**Deploy**] をクリック
1. Lambda 関数の環境変数を設定
   - [**設定**] タブをクリック
   - 左側メニューより[**環境変数**] をクリック
   - [**編集**] をクリック
   - [**環境変数の追加**] をクリック
   - [**キー**] に `MSG` 、[**値**] に `Hello!` を入力
   - [**保存**] をクリック
1. Lambda 関数のテスト実行
   - [**テスト**] タブをクリック
   - イベント名: `work-event`
   - イベント JSON:このフォルダにある event.json の内容に置換える
   - [**テスト**] をクリック
   - 緑色の [**実行中の関数: 成功 (ログ)**] が表示されることを確認
   - [**詳細**]をクリックして展開表示
   - 下記が表示されていることを確認
     ```
     {
       "statusCode": 200,
       "body": "Hello! Alex"
     }
     ```
  - [**ログ出力**] セクションを確認
  - その後、数回 [**テスト**] をクリック。
    - テスト実行する毎に、[**ログ出力**] の [**outside_handler**] と [**inside_handler**] の値がどうなるかを確認
---

* lambda_function.py
  - Lambda 関数のコード
* event.json
  - Lambda 関数のテストで使用する event オブジェクト用の JSON






